<html>
<head>
	<title>首頁</title>
</head>
<style>
	#banner{
		background-color:#FFFFFF;
		color:#26BEC9;
		border:100%;
		font-family:微軟正黑體;
		font-size:64px;
		text-align:center;
		vertical-align:center;
		height:100px;
	}
	#menu{
		background-color:#1F9BA5;
		color:#FFFFFF;
		border:100%;
		font-family:微軟正黑體;
		font-size:26px;
		vertical-align:center;
		height:50px;
	}
	.menustyle{
		text-decoration:none;
		color:#FFFFFF;
		height:50px;
		line-height:50px;
	}
</style>
<body onload="checkUser();">
	<div id="banner">
		首頁
	</div>
	<div id="menu">
		<div id="login" style="float:left;">
			<a href="./index.html" id="mainpage" class="menustyle">&nbsp;首頁</a>
			<a href="./buy.html" id="buytoken" class="menustyle">購買點數</a>
			<a href="./sell.html" id="selltoken" class="menustyle">販售點數</a>
		</div>
		<div id="superuser" style="float:left;">
			<a href="./launch.html" id="launchtoken" class="menustyle">&nbsp;發行點數</a>
		</div>
		<div id="login2" style="float:right;">
			<a href="./a.html" id="name" class="menustyle"></a>
			<a href="###" id="logoutt" class="menustyle" onclick="Logout();">登出</a>
		</div>
		<div id="logout" style="float:right;">
			<a href="./register.html" id="register" class="menustyle">註冊</a>
			<a href="./login.html" id="loginn" class="menustyle">登入</a>
		</div>
	</div>
	<div class="common">
			<dd><font size="10" face="微軟正黑體">Market</font></dd>
	<hr/><br/>
			<dt><font size="5" face="微軟正黑體">Buy</font></dt>
			<br>
			<form>
				<select name="Buy company">
					<option value="NONE">Choose company</option>
					<option value="CHT">中華電信</option>
					<option value="AP">遠東航空</option>
				</select>
			</form>
			<font face="微軟正黑體">Price : </font>
			<input type="text" class="buy_price" id="buy_price" autofocus="true" required="true" /><br>
			<font face="微軟正黑體">Amount : </font>
			<input type="text" class="buy_amount" id="buy_amount" autofocus="true" required="true" />
			<button type="button" name="buy_confirm" value="buy_confirm" class="buy_confirm" onClick="Buy_comfirmBt();">Confirm</button>
	<br/><br/>


</body>
<script language="javascript" >
	var username = localStorage.getItem('name');

	var Web3 = require('web3');
    var web3 = new Web3(new Web3.providers.HttpProvider('http://140.113.72.23:8545'));

	function checkUser(){
		document.getElementById('name').innerHTML=username+",您好 !  ";
		if(username!=null){//login
			document.getElementById('login').style.display='';
			document.getElementById('login2').style.display='';
			document.getElementById('superuser').style.display='none';
			document.getElementById('logout').style.display='none';
			
			//superuser
			if(username=='gina'){
				document.getElementById('superuser').style.display='';
			}
			else{
				document.getElementById('superuser').style.display='none';
			}
		}
		else{//not yet login
			document.getElementById('login').style.display='none';
			document.getElementById('login2').style.display='none';
			document.getElementById('superuser').style.display='none';
			document.getElementById('logout').style.display='';
		}
		
	}
	function Buy_comfirmBt(){
		var token=web3.eth.contract([
	{
		"constant": true,
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "issue_time",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "lasttime",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "buyprice",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_to",
				"type": "address"
			},
			{
				"name": "_value",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [
			{
				"name": "success",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "lastprice",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"name": "tokenname",
				"type": "string"
			},
			{
				"name": "supplyamount",
				"type": "uint256"
			},
			{
				"name": "buyP",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	}
],'0xae8accdcb08227d71c77432158601066b2befead');

		/*buy token
		if(token.transfer.call(_from,_to,amount)){
			alert("Buy confirm.");
			window.location.reload();
		}
		else{
			alert("Failed!Please try it again");
			window.location.reload();
		}
		*/
	}
	
	function Logout(){
		localStorage.clear();
		window.location.reload();
	}
</script>
</html>